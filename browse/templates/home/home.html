{%- extends "base/base.html" %}
{% block pagetitle %}arXiv homepage{% endblock %} 
{%- block content %}
<div class="row">
  <div class="col">
    <h1>
      Welcome
      {% if request.auth is defined and request.auth.user is defined %}
        {{ request.auth.user.username }}
      {% else %}
        to arXiv
      {% endif %}
    </h1>
    <p>arXiv is a free distribution service and an open-access archive for {% if document_count -%}{{ "{:,}".format(document_count) }}{%- endif %}
     scholarly articles in the fields of physics, mathematics, computer science, quantitative biology, quantitative finance, statistics, electrical engineering and systems science, and economics.
     Materials on this site are not peer-reviewed by arXiv.</p>
  </div>
</div><!-- /end intro -->

{#-  /multi sends to either search, catchup or form interface based on which button is hit. -#}
<div class="d-flex justify-content-center">
  <form class="row p-2 g-1 arxiv-home-form">
    <h3 class="w-100 d-flex justify-content-center"><label for="search-category" class="form-label">Subject search and browse:</label></h3>
    <div class="input-group">
      <select name="group" title="Search in" id="search-category" class="form-select">
      {%- for group_key, group_details in groups.items() if not group_details.is_test %}
        <option selected>Select a category</option>
        <option
            value ="{{group_key}}"
            data-url="{{url_for('search_archive', archive=group_key[4:])}}"
            {% if group_key == 'grp_physics' %}selected="selected"{% endif %}>
          {{ group_details.name }}
        </option>
        {%- endfor %}
      </select>
      <input type="submit" id="adv-search-btn" value="Search" class="btn btn-primary">
      <input type="submit" name="/form" value="Form Interface" class="btn btn-primary">
      <input type="submit" name="/catchup" value="Catchup" class="btn btn-primary">
    </div>
    <script type="text/javascript">
     function doAdvSearchBtn(event) {
         sel = document.querySelector('select[name="group"]')
         if(sel && sel.options && sel.options[sel.selectedIndex].dataset.url ){
             data_url = sel.options[sel.selectedIndex].dataset.url
             if( data_url ){
                 window.location = data_url;
             }else{
                 console.error('home page search button: no data_url found for search');
             }
         }
     }
     document.addEventListener('DOMContentLoaded',function() {
         document.getElementById('adv-search-btn').onclick=doAdvSearchBtn;
     },false);
    </script>
  </form>
</div>
<!-- /end search -->

<div class="card-group arxiv-home-messages arxiv-cards-warm">
  <div class="card">
    <div class="card-body">
      <h4 class="card-title">News</h4>
      {%- include "home/news.html" -%}
      <a href="https://blog.arxiv.org/" class="btn btn-primary">See All News</a><br>
      <a href="https://arxiv.org/new/" class="btn btn-outline-secondary btn-tiny">Old 'What's New' Pages</a>
    </div>
  </div>
  <div class="card">
    <div class="card-body">
      <h4 class="card-title">COVID-19 Quick Links</h4>
      <p>See COVID-19 SARS-CoV-2 preprints from:</p>
      <a href="https://arxiv.org/covid19search" title="COVID-19 SARS-CoV-2 preprints from arXiv" class="btn btn-primary">arXiv</a>
      <a target="_blank" href="https://connect.biorxiv.org/relate/content/181" title="COVID-19 SARS-CoV-2 preprints from medRxiv and bioRxiv" class="btn btn-primary">medRxiv and bioRxiv</a>
      <p><em>Important:</em> e-prints posted on arXiv are not peer-reviewed by arXiv; they should not be relied upon without context to guide clinical practice or health-related behavior and should not be reported in news media as established information without consulting multiple experts in the field.</p>
    </div>
  </div>
</div><!-- /end news and messages -->
<br><br>

{{- group_section(('grp_physics','grp_math','grp_cs','grp_q-bio','grp_q-fin','grp_stat','grp_eess','grp_econ')) }}
{% endblock content -%}

{%- macro group_section(group_keys) -%}
  {%- for group_key in group_keys -%}
  <h2>{{ groups[group_key].name }}</h2>
  <ul>
    {% for archive_key, archive_details in archives.items()|sort(attribute='1.name') if archives[archive_key].in_group == group_key  %}
      {%- set archive_search_url = url_for('search_archive', archive=archive_key) -%}
      {%- set archive_url = url_for('browse.archive', archive=archive_key) if archive_key != 'cs' else 'https://arxiv.org/corr' -%}
      {%- set archive_name = archives[archive_key].name if archive_key != 'cs' else 'Computing Research Repository' -%}

    {#- TODO: url_for /list, /catchup -#}
    <li>
      <a href="{{ archive_url }}" id="main-{{ archive_key }}" aria-labelledby="main-{{ archive_key }}">{{ archive_name }}</a>
      (<strong id="{{ archive_key }}">{{ archive_key if archive_key != 'cs' else 'CoRR' }}</strong> <a id="new-{{ archive_key }}" aria-labelledby="new-{{ archive_key }} {{ archive_key }}" href="/list/{{ archive_key }}/new">new</a>, <a id="recent-{{ archive_key }}" aria-labelledby="recent-{{ archive_key }} {{ archive_key }}" href="/list/{{ archive_key }}/recent">recent</a>, <a id="search-{{ archive_key }}" aria-labelledby="search-{{ archive_key }} {{ archive_key }}" href="{{ archive_search_url }}">search</a>{% if 0 %}, <a href="/catchup?archive={{ archive_key }}&amp;sdaysback=30&amp;num=2000&amp;order=reverse&amp;method=without">last month</a>{% endif %})
      {%- if group_key == 'grp_physics' and archive_key not in categories  -%}<br/>includes:
      {%- elif archive_key == 'cs' -%}<br/>includes (see <a href="https://arxiv.org/corr/subjectclasses" id="details-{{ archive_key }}" aria-labelledby="details-{{ archive_key }} main-{{ archive_key }}">detailed description</a>):
      {%- elif archive_key in ('eess', 'econ') -%}<br/>includes (see <a href="/help/{{ archive_key }}" id="details-{{ archive_key }}" aria-labelledby="details-{{ archive_key }} main-{{ archive_key }}">detailed description</a>):
      {%- elif group_key != 'grp_physics' -%}<br/>includes (see <a href="/new/{{ archive_key }}.html" id="details-{{ archive_key }}" aria-labelledby="details-{{ archive_key }} main-{{ archive_key }}">detailed description</a>):
      {%- endif -%}
      {% for category_key, category_details in categories.items()|sort(attribute='1.name') if categories[category_key].in_archive == archive_key %}
      {% if not (loop.first and loop.last and group_key == 'grp_physics') %}<a href="/list/{{ category_key }}/recent" id="{{ category_key }}" aria-labelledby="main-{{ archive_key }} {{ category_key }}">{{ categories[category_key].name }}</a>{% if not loop.last %}; {% endif %}{% endif %}
      {% endfor %}
    </li>
    {% endfor %}
  </ul>
  {% endfor %}
{%- endmacro -%}
